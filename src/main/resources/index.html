<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SimpleFileServer</title>
</head>
<body>

    <div>#(title)</div>

    <p>
        <label for="CheckAll">
            <input id="CheckAll" name="CheckAll" type="checkbox" />
        </label>
        <label>全选</label>
    </p>

    <ul>
        #for(vo: voList)
        <li>
            <label>
                <input name="CheckOne" type="checkbox" />
            </label>
            <a href="#(vo.url)" isFile="#(vo.voIsFile)">#(vo.displayName)</a>
        </li>
        #end
    </ul>

    <script type="text/javascript" src="/webjars/webjar-jquery/3.5.1/dist/jquery.min.js"></script>
    <script>
        $("a[isFile=true]").click(function () {
            window.open("about:blank").location.href = $(this).attr("href");
            return false;
        });
        $("input").prop("checked", false);
        $("#CheckAll").click(function () {
            $("input[name=CheckOne]").prop("checked", this.checked);
        });
        $("input[name=CheckOne]").click(function () {
            var $items = $("input[name=CheckOne]");
            var checkedCount = 0;
            $.each($items, function (index, $item) {
                checkedCount += $item.checked ? 1 : 0;
            });
            $("#CheckAll").prop("checked", checkedCount === $items.length);
        });
    </script>
</body>
</html>
